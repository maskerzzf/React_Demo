<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="root"></div>
    <script src="../lib/react.js"></script>
    <script src="../lib/react-dom.js"></script>
    <script src="../lib/babel.js"></script>
    <script type="text/babel">
        /*
            this的4种绑定规则
            1.默认绑定 foo()
            2.隐式绑定 被一个对象执行 obj.foo()->obj
            3.显式绑定 call apply bind
            在JavaScript中，call、apply和bind是可以用来操控函数上下文、控制函数的调用方式的方法。下面是对它们的简要解释：
            call：call方法用于以特定的上下文和参数调用函数。它接受上下文对象作为第一个参数，后面是逗号分隔的函数参数。函数会立即以指定的上下文执行。
            apply：apply方法与call类似，但它接受一个数组或类数组对象作为参数。第一个参数是上下文对象，第二个参数是包含函数参数的数组或类数组对象。函数会以指定的上下文和参数进行调用。
            bind：bind方法用于创建一个新的函数，将原始函数绑定到指定的上下文。它返回一个绑定了指定上下文的新函数，不会立即执行。
            4.new绑定 new foo()->this
        */
       const obj = {
        foo:function(){
            console.log(this)
        }
       }
       obj.foo()
       const config = {
        onClick:obj.foo
       }
       const click = config.onClick
       click()
        const root = ReactDOM.createRoot(document.querySelector("#root"))
        class App extends React.Component {
            constructor() {
                super()
                this.state = {
                    msg: "哈哈",
                    counter:100,
                }
                this.btn1 = this.btn1.bind(this)
            }
            btn1(){
                console.log("btn1",this)
                this.setState({
                    counter:this.state.counter+1
                })
            }
            btn2 = ()=>{
                console.log("btn2",this)
                this.setState({
                    counter:this.state.counter+1
                })
            }
            btn3 = ()=>{
                console.log("btn3",this)
                this.setState({
                    counter:this.state.counter+1
                })
            }
            render() {
                return (<div>
                    {/*this绑定 bind()*/}
                    <button onClick={this.btn1}>按钮1</button>
                    {/*this绑定 箭头函数*/}
                    <button onClick={this.btn2}>按钮2</button>
                    {/*this绑定 直接传入箭头函数*/}
                    <button onClick={()=>{this.btn3()}}>按钮3</button>
                    <h2>{this.state.counter}</h2>
                    </div>)
            }
        }
        root.render(<App />)
    </script>
</body>
</html>